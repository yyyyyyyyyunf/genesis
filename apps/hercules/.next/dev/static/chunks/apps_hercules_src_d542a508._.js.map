{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/context/LocaleContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, ReactNode } from 'react';\n\ntype Locale = 'en' | 'zh' | 'ja' | 'ko';\n\ninterface LocaleContextType {\n  locale: Locale;\n}\n\n// 默认为 'en'，如请求所示\nconst LocaleContext = createContext<LocaleContextType>({\n  locale: 'en',\n});\n\nexport const useLocale = () => useContext(LocaleContext);\n\ninterface LocaleProviderProps {\n  children: ReactNode;\n  // 在真实应用中，这可能由检测到请求语言环境的 Server Component 传递\n  locale?: Locale;\n}\n\nexport const LocaleProvider = ({ children, locale = 'en' }: LocaleProviderProps) => {\n  return (\n    <LocaleContext.Provider value={{ locale }}>\n      {children}\n    </LocaleContext.Provider>\n  );\n};\n\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAUA,iBAAiB;AACjB,MAAM,8BAAgB,IAAA,+UAAa,EAAoB;IACrD,QAAQ;AACV;AAEO,MAAM,YAAY;;IAAM,OAAA,IAAA,4UAAU,EAAC;AAAa;GAA1C;AAQN,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAE,SAAS,IAAI,EAAuB;IAC7E,qBACE,8VAAC,cAAc,QAAQ;QAAC,OAAO;YAAE;QAAO;kBACrC;;;;;;AAGP;KANa"}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/widgets/Text/LocaleBadge.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useLocale } from '@/context/LocaleContext';\n\nexport const LocaleBadge = () => {\n  const { locale } = useLocale();\n  return (\n    <span className=\"inline-block ml-2 px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full align-middle\">\n      {locale}\n    </span>\n  );\n};\n\n"],"names":[],"mappings":";;;;;AAGA;;;AAHA;;AAKO,MAAM,cAAc;;IACzB,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,oKAAS;IAC5B,qBACE,8VAAC;QAAK,WAAU;kBACb;;;;;;AAGP;GAPa;;QACQ,oKAAS;;;KADjB"}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/widgets/Image/ClientClickTracker.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\n\ninterface ClientClickTrackerProps {\n  clickUrl: string;\n  children: React.ReactNode;\n}\n\nexport const ClientClickTracker = ({ clickUrl, children }: ClientClickTrackerProps) => {\n  const handleClick = (e: React.MouseEvent) => {\n    // 如果不是 anchor 标签，阻止默认行为，或者在导航前处理逻辑\n    // 由于我们用 <a> 包装，浏览器会自动导航。\n    // 我们只想在这里进行埋点。\n    console.log(`[Analytics] Click tracked for URL: ${clickUrl}`);\n    \n    // 在真实应用中，你可能会发送 beacon:\n    // navigator.sendBeacon('/api/track', JSON.stringify({ url: clickUrl }));\n  };\n\n  return (\n    <a \n      href={clickUrl} \n      onClick={handleClick}\n      target=\"_blank\" \n      rel=\"noopener noreferrer\"\n      className=\"block w-full cursor-pointer\"\n    >\n      {children}\n    </a>\n  );\n};\n\n"],"names":[],"mappings":";;;;;AAAA;;AASO,MAAM,qBAAqB,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAA2B;IAChF,MAAM,cAAc,CAAC;QACnB,mCAAmC;QACnC,yBAAyB;QACzB,eAAe;QACf,QAAQ,GAAG,CAAC,CAAC,mCAAmC,EAAE,UAAU;IAE5D,wBAAwB;IACxB,yEAAyE;IAC3E;IAEA,qBACE,8VAAC;QACC,MAAM;QACN,SAAS;QACT,QAAO;QACP,KAAI;QACJ,WAAU;kBAET;;;;;;AAGP;KAtBa"}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uOAAO,EAAC,IAAA,iMAAI,EAAC;AACtB"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/lib/engine/utils.tsx"],"sourcesContent":["import React from 'react';\nimport dynamic from 'next/dynamic';\n\n// Client Registry Helper - 用于必须在客户端运行的组件\n// 通常是那些具有复杂状态（如 Tabs）或使用 Hooks 的组件\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const dynamicClientFloor = (importFunc: () => Promise<React.ComponentType<any>>) => {\n  return dynamic(importFunc, {\n    loading: () => <div className=\"w-full h-24 animate-pulse bg-gray-100 rounded-md m-4\" />,\n    ssr: true // 我们希望客户端组件也能进行 SSR\n  });\n};\n\n"],"names":[],"mappings":";;;;;AACA;;;AAKO,MAAM,qBAAqB,CAAC;IACjC,OAAO,IAAA,8UAAO,EAAC,YAAY;QACzB,SAAS,kBAAM,8VAAC;gBAAI,WAAU;;;;;;QAC9B,KAAK,KAAK,oBAAoB;IAChC;AACF"}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/widgets/client-registry.tsx"],"sourcesContent":["import React from 'react';\nimport { FloorComponentProps } from '@/lib/engine/types';\nimport { dynamicClientFloor } from '@/lib/engine/utils';\n\nexport const ClientRegistry: Record<string, React.ComponentType<FloorComponentProps>> = {\n  // Tab 本质上是交互式的 (useState)，所以它放在这里\n  Tab: dynamicClientFloor(() => import('./Tab').then(mod => mod.Tab)),\n  \n  // Shelf 未来可能有无限滚动或加入购物车功能，所以目前保留在客户端\n  // 但严格来说，静态网格可以是 RSC。让我们保留它在客户端以演示混合渲染。\n  Shelf: dynamicClientFloor(() => import('./Shelf').then(mod => mod.Shelf)),\n};\n"],"names":[],"mappings":";;;;AAEA;;AAEO,MAAM,iBAA2E;IACtF,kCAAkC;IAClC,KAAK,IAAA,2KAAkB,EAAC,IAAM,qHAAgB,IAAI,CAAC,CAAA,MAAO,IAAI,GAAG;IAEjE,qCAAqC;IACrC,uCAAuC;IACvC,OAAO,IAAA,2KAAkB,EAAC,IAAM,uHAAkB,IAAI,CAAC,CAAA,MAAO,IAAI,KAAK;AACzE"}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/widgets/Text/index.tsx"],"sourcesContent":["import React from 'react';\nimport { TextProps } from './schema';\nimport { cn } from '@/lib/utils';\nimport { LocaleBadge } from './LocaleBadge';\n\nexport const Text = ({ data }: { data: TextProps }) => {\n  const { content, align, size, color } = data;\n\n  const sizeMap = {\n    sm: 'text-sm',\n    base: 'text-base',\n    lg: 'text-lg',\n    xl: 'text-xl',\n    '2xl': 'text-2xl',\n  };\n\n  return (\n    <div className={cn('w-full p-4', `text-${align}`)}>\n      <p className={cn(sizeMap[size || 'base'], color)}>\n        {content}\n        {/* 演示在 RSC 内部通过 Client Component 插槽使用 Context */}\n        <LocaleBadge />\n      </p>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;AAEO,MAAM,OAAO,CAAC,EAAE,IAAI,EAAuB;IAChD,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;IAExC,MAAM,UAAU;QACd,IAAI;QACJ,MAAM;QACN,IAAI;QACJ,IAAI;QACJ,OAAO;IACT;IAEA,qBACE,8VAAC;QAAI,WAAW,IAAA,gJAAE,EAAC,cAAc,CAAC,KAAK,EAAE,OAAO;kBAC9C,cAAA,8VAAC;YAAE,WAAW,IAAA,gJAAE,EAAC,OAAO,CAAC,QAAQ,OAAO,EAAE;;gBACvC;8BAED,8VAAC,4KAAW;;;;;;;;;;;;;;;;AAIpB;KApBa"}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/widgets/Image/index.tsx"],"sourcesContent":["import React from 'react';\nimport { ImageProps } from './schema';\nimport { cn } from '@/lib/utils';\nimport { ClientClickTracker } from './ClientClickTracker';\n\nexport const Image = ({ data }: { data: ImageProps }) => {\n  const { src, alt, aspectRatio, objectFit, clickUrl } = data;\n\n  const ratioMap = {\n    '16/9': 'aspect-video',\n    '4/3': 'aspect-[4/3]',\n    '1/1': 'aspect-square',\n    'auto': 'aspect-auto',\n  };\n\n  const fitMap = {\n    cover: 'object-cover',\n    contain: 'object-contain',\n    fill: 'object-fill',\n  };\n\n  // 这完全是在服务器上生成的静态 HTML\n  const ImageContent = (\n    // eslint-disable-next-line @next/next/no-img-element\n    <img\n      src={src}\n      alt={alt || 'image'}\n      className={cn('w-full h-full', fitMap[objectFit || 'cover'])}\n    />\n  );\n\n  const wrapperClass = cn('block w-full overflow-hidden', ratioMap[aspectRatio || 'auto']);\n\n  // 如果有点击链接，则用 Client Component 包装\n  if (clickUrl) {\n    return (\n      <div className={wrapperClass}>\n        <ClientClickTracker clickUrl={clickUrl}>\n          {ImageContent}\n        </ClientClickTracker>\n      </div>\n    );\n  }\n\n  // 否则返回静态 HTML\n  return (\n    <div className={wrapperClass}>\n      {ImageContent}\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;AAEO,MAAM,QAAQ,CAAC,EAAE,IAAI,EAAwB;IAClD,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,WAAW,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG;IAEvD,MAAM,WAAW;QACf,QAAQ;QACR,OAAO;QACP,OAAO;QACP,QAAQ;IACV;IAEA,MAAM,SAAS;QACb,OAAO;QACP,SAAS;QACT,MAAM;IACR;IAEA,sBAAsB;IACtB,MAAM,eACJ,qDAAqD;kBACrD,8VAAC;QACC,KAAK;QACL,KAAK,OAAO;QACZ,WAAW,IAAA,gJAAE,EAAC,iBAAiB,MAAM,CAAC,aAAa,QAAQ;;;;;;IAI/D,MAAM,eAAe,IAAA,gJAAE,EAAC,gCAAgC,QAAQ,CAAC,eAAe,OAAO;IAEvF,iCAAiC;IACjC,IAAI,UAAU;QACZ,qBACE,8VAAC;YAAI,WAAW;sBACd,cAAA,8VAAC,2LAAkB;gBAAC,UAAU;0BAC3B;;;;;;;;;;;IAIT;IAEA,cAAc;IACd,qBACE,8VAAC;QAAI,WAAW;kBACb;;;;;;AAGP;KA7Ca"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/widgets/server-registry.tsx"],"sourcesContent":["import React from 'react';\nimport { Text } from './Text';\nimport { Image } from './Image';\nimport { FloorComponentProps } from '@/lib/engine/types';\n\n// Server Registry - 用于可以作为 RSC 渲染的组件\n// 我们直接导入它们，因为 RSC 不需要 'dynamic' 进行代码分割（服务器会处理）\n// 但为了避免打包客户端代码，我们必须确保这些文件不导入大型客户端库\n// \n// 为什么这里必须用 any？\n// 因为这个注册表包含不同 Props 类型的组件（Text 用 TextProps，Image 用 ImageProps）。\n// 在 TypeScript 中，没有一个单一的强类型（除了 any）能同时代表 \"接受 TextProps 的组件\" 和 \"接受 ImageProps 的组件\"。\n// 当我们用字符串 key 动态访问这个对象时，TS 无法知道我们会取到哪一个，所以我们必须放宽类型限制。\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const ServerRegistry: Record<string, React.ComponentType<FloorComponentProps<any>>> = {\n  Text,\n  Image,\n};\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAYO,MAAM,iBAAgF;IAC3F,MAAA,+JAAI;IACJ,OAAA,iKAAK;AACP"}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/widgets/full-registry.ts"],"sourcesContent":["import { ClientRegistry } from './client-registry';\nimport { ServerRegistry } from './server-registry';\n\n// 客户端渲染的合并注册表\n// 当在客户端渲染时（例如在 Tab 内部），我们需要访问所有组件\nexport const FullRegistry = { ...ServerRegistry, ...ClientRegistry };\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAIO,MAAM,eAAe;IAAE,GAAG,8KAAc;IAAE,GAAG,8KAAc;AAAC"}},
    {"offset": {"line": 351, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/widgets/component-map.ts"],"sourcesContent":["export const COMPONENT_CODES: Record<number, string> = {\n  1: 'Text',\n  2: 'Image',\n  3: 'Shelf',\n  4: 'Tab',\n};\n\nexport const COMPONENT_NAMES: Record<string, number> = Object.entries(COMPONENT_CODES).reduce((acc, [code, name]) => {\n  acc[name] = Number(code);\n  return acc;\n}, {} as Record<string, number>);\n\nexport function getComponentKey(code: number): string | undefined {\n  return COMPONENT_CODES[code];\n}\n\nexport function getComponentCode(name: string): number | undefined {\n  return COMPONENT_NAMES[name];\n}\n\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,kBAA0C;IACrD,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;AACL;AAEO,MAAM,kBAA0C,OAAO,OAAO,CAAC,iBAAiB,MAAM,MAAC,CAAC,KAAK,CAAC,MAAM,KAAK;IAC9G,GAAG,CAAC,KAAK,GAAG,OAAO;IACnB,OAAO;AACT,GAAG,CAAC;;AAEG,SAAS,gBAAgB,IAAY;IAC1C,OAAO,eAAe,CAAC,KAAK;AAC9B;AAEO,SAAS,iBAAiB,IAAY;IAC3C,OAAO,eAAe,CAAC,KAAK;AAC9B"}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/lib/engine/renderer/ClientRecursiveRenderer.tsx"],"sourcesContent":["'use client';\n\nimport React, { Suspense } from 'react';\nimport { FullRegistry } from '@/widgets/full-registry';\nimport { Floor } from '../types';\nimport { getComponentKey } from '@/widgets/component-map';\n\ninterface ClientRecursiveRendererProps {\n  floors: Floor[];\n}\n\nexport const ClientRecursiveRenderer = ({ floors }: ClientRecursiveRendererProps) => {\n  if (!floors || floors.length === 0) return null;\n\n  return (\n    <>\n      {floors.map((floor) => {\n        const componentKey = getComponentKey(floor.type);\n        const Component = componentKey ? FullRegistry[componentKey] : undefined;\n\n        if (!Component) {\n          return (\n            <div key={floor.id} className=\"p-4 border border-red-200 bg-red-50 text-red-600\">\n              未知组件: {floor.type} {componentKey ? `(${componentKey})` : ''}\n            </div>\n          );\n        }\n\n        return (\n          <Suspense key={floor.id} fallback={<div className=\"w-full h-20 bg-gray-50 animate-pulse\" />}>\n            <Component data={floor.data} />\n          </Suspense>\n        );\n      })}\n    </>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAWO,MAAM,0BAA0B,CAAC,EAAE,MAAM,EAAgC;IAC9E,IAAI,CAAC,UAAU,OAAO,MAAM,KAAK,GAAG,OAAO;IAE3C,qBACE;kBACG,OAAO,GAAG,CAAC,CAAC;YACX,MAAM,eAAe,IAAA,4KAAe,EAAC,MAAM,IAAI;YAC/C,MAAM,YAAY,eAAe,yKAAY,CAAC,aAAa,GAAG;YAE9D,IAAI,CAAC,WAAW;gBACd,qBACE,8VAAC;oBAAmB,WAAU;;wBAAmD;wBACxE,MAAM,IAAI;wBAAC;wBAAE,eAAe,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,GAAG;;mBADjD,MAAM,EAAE;;;;;YAItB;YAEA,qBACE,8VAAC,0UAAQ;gBAAgB,wBAAU,8VAAC;oBAAI,WAAU;;;;;;0BAChD,cAAA,8VAAC;oBAAU,MAAM,MAAM,IAAI;;;;;;eADd,MAAM,EAAE;;;;;QAI3B;;AAGN;KAzBa"}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/widgets/Tab/index.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { TabProps } from './schema';\nimport { cn } from '@/lib/utils';\nimport { ClientRecursiveRenderer } from '@/lib/engine/renderer/ClientRecursiveRenderer';\n\nexport const Tab = ({ data }: { data: TabProps }) => {\n  const { items, defaultActiveKey } = data;\n  const [activeKey, setActiveKey] = useState(defaultActiveKey || items[0]?.key);\n\n  if (!items || items.length === 0) return null;\n\n  const activeItem = items.find((item) => item.key === activeKey) || items[0];\n\n  return (\n    <div className=\"w-full flex flex-col\">\n      {/* Tab 头部 */}\n      <div className=\"flex border-b overflow-x-auto\">\n        {items.map((item) => (\n          <button\n            key={item.key}\n            onClick={() => setActiveKey(item.key)}\n            className={cn(\n              'px-6 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors',\n              activeKey === item.key\n                ? 'border-black text-black'\n                : 'border-transparent text-gray-500 hover:text-gray-700'\n            )}\n          >\n            {item.label}\n          </button>\n        ))}\n      </div>\n\n      {/* Tab 内容 */}\n      <div className=\"p-4 bg-gray-50 min-h-[200px]\">\n        {activeItem.children && activeItem.children.length > 0 ? (\n          <div className=\"space-y-4\">\n             <ClientRecursiveRenderer floors={activeItem.children} />\n          </div>\n        ) : (\n          <div className=\"text-center text-gray-400 py-10\">\n            No content in this tab\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;;;AALA;;;;AAOO,MAAM,MAAM,CAAC,EAAE,IAAI,EAAsB;;IAC9C,MAAM,EAAE,KAAK,EAAE,gBAAgB,EAAE,GAAG;IACpC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,0UAAQ,EAAC,oBAAoB,KAAK,CAAC,EAAE,EAAE;IAEzE,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,GAAG,OAAO;IAEzC,MAAM,aAAa,MAAM,IAAI,CAAC,CAAC,OAAS,KAAK,GAAG,KAAK,cAAc,KAAK,CAAC,EAAE;IAE3E,qBACE,8VAAC;QAAI,WAAU;;0BAEb,8VAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,qBACV,8VAAC;wBAEC,SAAS,IAAM,aAAa,KAAK,GAAG;wBACpC,WAAW,IAAA,gJAAE,EACX,gFACA,cAAc,KAAK,GAAG,GAClB,4BACA;kCAGL,KAAK,KAAK;uBATN,KAAK,GAAG;;;;;;;;;;0BAenB,8VAAC;gBAAI,WAAU;0BACZ,WAAW,QAAQ,IAAI,WAAW,QAAQ,CAAC,MAAM,GAAG,kBACnD,8VAAC;oBAAI,WAAU;8BACZ,cAAA,8VAAC,8MAAuB;wBAAC,QAAQ,WAAW,QAAQ;;;;;;;;;;6EAGvD,8VAAC;oBAAI,WAAU;8BAAkC;;;;;;;;;;;;;;;;;AAO3D;GA1Ca;KAAA"}},
    {"offset": {"line": 540, "column": 0}, "map": {"version":3,"sources":["file:///Users/zongyf/Documents/code/genesis/apps/hercules/src/providers/index.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { LocaleProvider } from '@/context/LocaleContext';\n\ninterface ProvidersProps {\n  children: React.ReactNode;\n}\n\nexport function Providers({ children }: ProvidersProps) {\n  return (\n    // 在真实应用中，locale 可能会作为 prop 从服务器传递\n    <LocaleProvider locale=\"zh\">\n      {children}\n    </LocaleProvider>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AASO,SAAS,UAAU,EAAE,QAAQ,EAAkB;IACpD,OACE,kCAAkC;kBAClC,8VAAC,yKAAc;QAAC,QAAO;kBACpB;;;;;;AAGP;KAPgB"}}]
}